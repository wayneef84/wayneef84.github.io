/*
  ___________________________________________________________________________________
 |                                                                                   |
 |   ______                   ______                 _ _              _              |
 |  |  ____|                 |  ____|               (_) |       /\   | |             |
 |  | |__ ___  _ __   __ _   | |__ __ _ _ __ ___     _| |_     /  \  | |__   ___     |
 |  |  __/ _ \| '_ \ / _` |  |  __/ _` | '_ ` _ \   | | | |   / /\ \ | '_ \ / _ \    |
 |  | | | (_) | | | | (_| |  | | | (_| | | | | | |  | | | |  / ____ \| | | |  __/    |
 |  |_|  \___/|_| |_|\__, |  |_|  \__,_|_| |_| |_|  |_|_|_| /_/    \_\_| |_|\___|    |
 |                    __/ |                                                          |
 |                   |___/                                                           |
 |___________________________________________________________________________________|

  MAGIC XTC BALL - STYLESHEET
  ====================================================================================
  
  CHANGELOG
  ------------------------------------------------------------------------------------
  v1.5 - MULTI-LINE SUPPORT (Current)
  - UI: Updated .ans-text to support <textarea> styling (resize, font-family).
  
  v1.4 - UI OVERHAUL
  - Modal: Added Flexbox styles for Split-View layout (.modal-split-top).
  - Preview: Added .ball-mini and .badge-mini for real-time visual feedback.
  
  v1.3 - PHYSICS TWEAK
  - Animation: Adjusted shake physics (heavier rattle).
  
  v1.2 - THE "X" BALL UPDATE
  - Dynamic Type: Added logic for font sizing.
  
  v1.1 - CUSTOMIZATION UPDATE
  - UI: Added modal and table styles.
  
  v1.0 - VISUAL OVERHAUL
  - Core: CSS 3D Transforms.
*/

:root {
    /* --- THEME COLORS --- */
    --ball-color: #1a1a1a; 
    --ball-shine: rgba(255, 255, 255, 0.4);
    
    /* --- LIQUID DISPLAY --- */
    --liquid-color: #100060; 
    --triangle-color: #1a1a4a;
    --text-color: #89cff0; 
    
    /* --- ENVIRONMENT --- */
    --bg-wood: #DEB887; 
    --modal-overlay: rgba(0,0,0,0.5);
    
    /* --- UI ACCENTS --- */
    --danger-color: #f44336;
    --success-color: #4CAF50;
    --border-color: #ddd;
    
    /* --- PREVIEW --- */
    --preview-color: #1a1a1a; /* Default for mini ball */
}

/* ===================================================================================
   BASE & RESET
   =================================================================================== */
* {
    box-sizing: border-box;
    user-select: none; 
    -webkit-tap-highlight-color: transparent;
}

body {
    margin: 0;
    padding: 0;
    background-color: var(--bg-wood);
    font-family: 'Arial Rounded MT Bold', 'Helvetica Rounded', Arial, sans-serif;
    height: 100dvh; 
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.game-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    align-items: center;
}

/* ===================================================================================
   HEADER
   =================================================================================== */
.game-header {
    width: 100%;
    padding: 15px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(0,0,0,0.1);
    flex-shrink: 0; 
}

.game-header h1 {
    margin: 0;
    font-size: 1.2rem;
    color: #4a3b2a;
}

.icon-btn, .back-btn {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    text-decoration: none;
    color: #4a3b2a;
}

/* ===================================================================================
   STAGE & BALL
   =================================================================================== */
.oracle-stage {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    perspective: 1000px; 
    width: 100%;
    position: relative;
}

.ball {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, var(--ball-shine), var(--ball-color) 40%, #000 85%);
    position: relative;
    box-shadow: 
        inset -10px -10px 40px rgba(0,0,0,0.8),
        0 20px 40px rgba(0,0,0,0.4);
    transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55); 
    cursor: pointer;
    transform-style: preserve-3d; 
    z-index: 2; 
}

.shadow {
    position: absolute;
    top: 50%; 
    left: 50%;
    margin-top: 130px; 
    margin-left: -100px; 
    width: 200px;
    height: 20px;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0.5) 0%, transparent 70%);
    z-index: 1; 
    pointer-events: none;
}

/* ===================================================================================
   FACES
   =================================================================================== */
.face {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    backface-visibility: hidden; 
}

.front { transform: rotateX(0deg); }

.badge {
    width: 140px;
    height: 140px;
    background: white;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.2);
    overflow: hidden; 
}

.badge span {
    font-size: 80px; 
    color: black;
    font-family: sans-serif;
    font-weight: bold;
    letter-spacing: -2px; 
}

.back { transform: rotateX(180deg); }

.window-rim {
    width: 160px;
    height: 160px;
    background: #333;
    border-radius: 50%;
    border: 4px solid #444; 
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: inset 0 0 20px black;
    overflow: hidden;
}

.liquid {
    width: 100%;
    height: 100%;
    background: radial-gradient(circle at center, #1a1a6a, var(--liquid-color));
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.bubble {
    position: absolute;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    animation: floatUp 3s infinite ease-in-out;
}
.b1 { width: 8px; height: 8px; left: 30%; top: 70%; animation-delay: 0s; }
.b2 { width: 12px; height: 12px; left: 60%; top: 80%; animation-delay: 1s; }
.b3 { width: 5px; height: 5px; left: 45%; top: 60%; animation-delay: 2s; }

@keyframes floatUp {
    0% { transform: translateY(0) scale(1); opacity: 0; }
    50% { opacity: 0.5; }
    100% { transform: translateY(-40px) scale(1.2); opacity: 0; }
}

/* ===================================================================================
   TRIANGLE ANSWER
   =================================================================================== */
.triangle {
    width: 0; 
    height: 0; 
    border-left: 55px solid transparent;
    border-right: 55px solid transparent;
    border-bottom: 95px solid var(--text-color); 
    position: relative;
    opacity: 0; 
    transform: scale(0.5) translateY(20px);
    transition: all 0.5s ease-out;
    display: flex;
    justify-content: center;
    z-index: 5;
}

.triangle span {
    position: absolute;
    top: 42px; 
    left: -45px; 
    width: 90px; 
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 13px; 
    line-height: 1.0;
    color: var(--liquid-color);
    font-weight: bold;
    text-transform: uppercase;
    text-shadow: 0 1px 0 rgba(255,255,255,0.3);
    word-wrap: break-word;
    white-space: pre-wrap;
}

/* ===================================================================================
   ANIMATION
   =================================================================================== */
@keyframes shake {
    0% { transform: translate(0, 0) rotate(0deg); }
    25% { transform: translate(-5px, 5px) rotate(-3deg); } 
    50% { transform: translate(5px, -5px) rotate(3deg); }
    75% { transform: translate(-5px, -5px) rotate(-3deg); }
    100% { transform: translate(0, 0) rotate(0deg); }
}

.shaking {
    animation: shake 0.15s infinite; 
}

.ball.revealed {
    transform: rotateX(180deg);
}

.ball.revealed .triangle {
    opacity: 1;
    transform: scale(1) translateY(0);
    transition-delay: 0.4s;
}

/* ===================================================================================
   UI ELEMENTS
   =================================================================================== */
.instructions {
    margin-top: 40px;
    color: #4a3b2a;
    font-size: 1.1rem;
    opacity: 0.8;
}

.perm-btn {
    margin-top: 20px; padding: 10px 20px;
    background: #4a3b2a; color: white;
    border: none; border-radius: 20px;
    font-size: 1rem;
}

.hidden { display: none !important; }

/* ===================================================================================
   MODAL (SETTINGS)
   =================================================================================== */
.modal {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: var(--modal-overlay);
    z-index: 100;
    display: flex; justify-content: center; align-items: flex-start;
    padding-top: 40px; overflow-y: auto;
}

.modal-content {
    background: white; width: 90%; max-width: 420px;
    border-radius: 10px; padding: 20px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.5);
    animation: slideDown 0.3s ease-out;
    margin-bottom: 50px;
}

@keyframes slideDown {
    from { transform: translateY(-50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    display: flex; justify-content: space-between; align-items: center;
    margin-bottom: 15px;
}
.modal-header h2 { margin: 0; font-size: 1.3rem; }
.close-btn { background: none; border: none; font-size: 2rem; cursor: pointer; line-height: 0.5; }

/* --- SPLIT LAYOUT --- */
.modal-split-top {
    display: flex;
    gap: 15px;
    margin-bottom: 15px;
    align-items: flex-start;
}

.modal-col-left {
    flex: 0 0 80px; 
    display: flex;
    justify-content: center;
    align-items: center;
    padding-top: 10px;
}

.modal-col-right {
    flex: 1; 
}

/* --- MINI BALL PREVIEW --- */
.ball-mini {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: radial-gradient(circle at 35% 35%, rgba(255,255,255,0.4), var(--preview-color, #000) 40%, #000 85%);
    position: relative;
    box-shadow: 2px 5px 10px rgba(0,0,0,0.3);
    display: flex;
    justify-content: center;
    align-items: center;
}

.badge-mini {
    width: 40px;
    height: 40px;
    background: white;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: inset 0 0 3px rgba(0,0,0,0.2);
}

.badge-mini span {
    font-size: 20px;
    font-weight: bold;
    color: black;
    font-family: sans-serif;
}

/* --- FORM CONTROLS --- */
.setting-group { margin-bottom: 15px; }
.tight { margin-bottom: 8px; } 

.setting-group label {
    display: block; margin-bottom: 5px;
    font-weight: bold; font-size: 0.9rem; color: #333;
}
.setting-group input[type="text"],
.setting-group input[type="number"],
.setting-group select,
.setting-group textarea { /* Added textarea support */
    width: 100%; padding: 8px; font-size: 1rem;
    border: 1px solid var(--border-color); border-radius: 4px;
    font-family: inherit;
}
.setting-group input[type="color"] {
    width: 100%; height: 40px; padding: 2px;
    border: 1px solid var(--border-color); border-radius: 4px;
}

.select-row { display: flex; gap: 10px; }
.select-row select { flex-grow: 1; }

.small-btn {
    padding: 8px 12px; background: #f0f0f0;
    border: 1px solid #ccc; border-radius: 4px;
    cursor: pointer; font-weight: bold; white-space: nowrap;
}
.small-btn:hover { background: #e0e0e0; }

.separator { margin: 15px 0; border: 0; border-top: 1px solid #eee; }
.row-group { display: flex; gap: 15px; }
.half { flex: 1; }

/* --- TABLE --- */
.answers-container {
    max-height: 180px; overflow-y: auto;
    border: 1px solid #ccc; border-radius: 4px;
    margin-bottom: 5px;
}

#answersTable { width: 100%; border-collapse: collapse; font-size: 0.9rem; }
#answersTable th {
    background: #f8f8f8; padding: 8px 5px; text-align: left;
    position: sticky; top: 0; border-bottom: 1px solid #ddd;
    font-size: 0.8rem; color: #666;
}
#answersTable td { padding: 5px; border-bottom: 1px solid #eee; vertical-align: top; }

/* UPDATED: Textarea Styling */
.ans-text { 
    width: 100%; 
    padding: 4px; 
    border: 1px solid #ddd; 
    border-radius: 3px; 
    resize: vertical; /* Allow vertical resizing */
    min-height: 36px;
    font-family: sans-serif;
    line-height: 1.2;
}

.ans-weight { width: 75px; padding: 4px; border: 1px solid #ddd; border-radius: 3px; }

.row-del-btn {
    background: #fff3e0; border: 1px solid #ffcc80;
    border-radius: 50%; width: 24px; height: 24px;
    color: #ef6c00; font-weight: bold;
    display: flex; justify-content: center; align-items: center;
    cursor: pointer;
}

.full-width { width: 100%; }

/* --- ACTIONS --- */
.actions { margin-top: 20px; }
.control-row { display: flex; gap: 10px; } 

.action-btn {
    width: 100%; padding: 12px;
    border: none; border-radius: 5px;
    font-weight: bold; font-size: 1rem;
    cursor: pointer; margin-bottom: 0; 
}
.primary { background: var(--success-color); color: white; }
.danger { background: var(--danger-color); color: white; }

.status-msg {
    display: block; text-align: center;
    color: #666; font-style: italic;
    background: #f5f5f5; padding: 10px;
    border-radius: 5px; font-size: 0.9rem;
    margin-bottom: 10px;
}

#editControls { display: flex; flex-direction: row; gap: 10px; }